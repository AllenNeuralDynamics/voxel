_anchors:
  - &camera_ip "127.0.0.1"
  - &camera_target spim_rig.drivers.cameras.simulated.SimulatedCamera
  - &laser_target spim_rig.drivers.lasers.simulated.SimulatedLaser
  - &daq_target spim_rig.drivers.daqs.simulated.SimulatedDaq
  - &fw_target spim_rig.drivers.axes.simulated.SimulatedDiscreteAxis
  - &linear_axis_target spim_rig.drivers.axes.simulated.SimulatedLinearAxis

metadata:
  name: "LightSheetMicroscope_01"
  control_port: 9000

nodes:
  primary:
    devices:
      daq_1:
        target: *daq_target
        kwargs: { device_name: "MockDev1" }
      laser_488:
        target: *laser_target
        kwargs: { wavelength: 488 }
      laser_561:
        target: *laser_target
        kwargs: { wavelength: 561 }
      laser_656:
        target: *laser_target
        kwargs: { wavelength: 656 }
      fw_detection_shared:
        target: *fw_target
        kwargs:
          slots: { 0: "Multiband", 1: "Green", 2: "Cyan" }
      fw_emission_cam1:
        target: *fw_target
        kwargs:
          slots: { 0: "GFP", 1: "RFP", 2: "Cy5" }
      fw_emission_cam2:
        target: *fw_target
        kwargs:
          slots: { 0: "GFP", 1: "RFP", 2: "Cy5" }
      x_axis:
        target: *linear_axis_target
        kwargs: { lower_limit_mm: 0.0, upper_limit_mm: 60.0 }
      y_axis:
        target: *linear_axis_target
        kwargs: { lower_limit_mm: 0.0, upper_limit_mm: 60.0 }
      z_axis:
        target: *linear_axis_target
        kwargs:
          { lower_limit_mm: 0.0, upper_limit_mm: 40.0, has_ttl_stepper: true }

  node_1:
    hostname: *camera_ip
    devices:
      camera_1:
        target: *camera_target
        kwargs: { pixel_size_um: "0.5, 0.5" }
  node_2:
    hostname: *camera_ip
    devices:
      camera_2:
        target: *camera_target
        kwargs: { pixel_size_um: "0.5, 0.5" }

stage:
  x: x_axis
  y: y_axis
  z: z_axis

daq:
  device: daq_1
  acq_ports:
    laser_488: ao0
    laser_561: ao1
    laser_656: ao2
    camera_1: ao3
    camera_2: ao4

detection:
  camera_1:
    filter_wheels: [fw_detection_shared, fw_emission_cam1]
  camera_2:
    filter_wheels: [fw_detection_shared, fw_emission_cam2]

illumination:
  laser_488: {}
  laser_561: {}
  laser_656: {}

channels:
  gfp:
    detection: camera_1
    illumination: laser_488
    filters:
      fw_detection_shared: "Multiband"
      fw_emission_cam1: "GFP"
    desc: "Green fluorescent protein channel using 488nm excitation"
    label: GFP
  rfp:
    detection: camera_2
    illumination: laser_561
    filters:
      fw_detection_shared: "Multiband"
      fw_emission_cam2: "RFP"
    desc: "Red fluorescent protein channel using 561nm excitation"
    label: RFP

profiles:
  dual_color_dual_cam:
    channels: ["gfp", "rfp"]
    desc: "Simultaneous GFP (488nm, cam1) and RFP (561nm, cam2) acquisition"
  single_gfp:
    channels: ["gfp"]
    desc: "Single GFP channel on camera 1 only"
  single_rfp:
    channels: ["rfp"]
    desc: "Single RFP channel on camera 2 only"
