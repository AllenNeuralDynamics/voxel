[project]
name = "voxelstack"
description = "Python Tools for building SPIM software"
authors = [
    { name = "Adam Glaser", email = "adam.glaser@alleninstitute.org" },
    { name = "Walter Mwaniki", email = "walter.mwaniki@alleninstitute.org" },
]
readme = "README.md"
license-files = ["LICENSE"]
requires-python = ">=3.12.7"
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Operating System :: OS Independent",
]
keywords = ["microscopy", "light-sheet", "lightsheet", "microscope", "imaging"]
version = "0.1.0"

dependencies = ["voxel[all]", "vidgets", "voxel-classic", "exaspim-control"]

[dependency-groups]
dev = ["ruff>=0.8.0", "pytest>=8.2.1"]

[tool.uv.workspace]
members = [
    "python/*",
    "microscopes/*/backend",
    "microscopes/extreme",
    "microscopes/exaspim-control",
]

[tool.uv.sources]
"voxel" = { workspace = true }
"vidgets" = { workspace = true }
"voxel-classic" = { workspace = true }
"exaspim-control" = { workspace = true }

[build-system]
requires = ["uv_build>=0.8.2,<0.9.0"]
build-backend = "uv_build"

[tool.tach]
source_roots = ["**/src"]
exclude = ["**/sdk/"]
external.rename = [
    "ruamel:ruamel_yaml",
    "serial:pyserial",
    "pylablib:pylablib_lightweight",
    "pyvisa:pyvisa_py",
    "cv2:opencv_python",
    "skimage:scikit_image",
    "PyImarisWriter:pyimariswriter",
]

[tool.ty.src]
exclude = [
    "**/.venv",
    "**/sdk",
    "**/sdks",
    "./classic_drivers",
    "./python/voxel-classic",
    "./python/voxel-classic/src/voxel_classic/processes",
    "./python/voxel/src/voxel/utils/processing",
    "./python/voxel/tests/processes",
    "./python/vidgets/src/vidgets/view",
    "**/miscellaneous_widgets",
]
[tool.ty.environment]
python = "./.venv"
