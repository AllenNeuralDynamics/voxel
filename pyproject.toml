[project]
name = "voxel"
description = "Python Library for building SPIM software"
authors = [
    { name = "Micah Woodard", email = "micah.woodard@alleninstitute.org" },
    { name = "Adam Glaser", email = "adam.glaser@alleninstitute.org" },
    { name = "Walter Mwaniki", email = "walter.mwaniki@alleninstitute.org" },
]
readme = "README.md"
license = { file = "LICENSE" }
requires-python = ">=3.12"
classifiers = [
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent",
]
keywords = ["microscopy", "light-sheet", "lightsheet", "microscope", "imaging"]
version = "0.1.0"
dependencies = [
    # core
    "numpy>=2.1.2",
    "matplotlib>=3.9.2",
    "pydantic>=2.9.2",
    "ruamel-yaml >= 0.18.5",
    # hardware
    "nidaqmx>=1.0.1",
    "pyserial >= 3.5",
    "pyusb >= 1.2.1",
    "PyVISA-py >= 0.7.2",
    "tigerasi >= 0.0.26",
    "pylablib-lightweight>=1.4.3",
    # files
    "imohash>=1.1.0",
    "tifffile>=2024.9.20",
    # processing
    "gputools >= 0.2.14",
    "fast-histogram >= 0.14",
    # utils
    "sympy >= 1.12.1",
    "ome-types>=0.5.3",
    "jax>=0.4.35",
    "tensorstore>=0.1.68",
    "cupy>=13.3.0",
    "torch>=2.4.1",
    "psutil>=6.1.0",
    "pyclesperanto>=0.16.0",
    "scikit-image>=0.24.0",
]

[project.optional-dependencies]
aaopto = ["aaopto-aotf>=0.0.11"]
cobolt = ["pycobolt"]
coherent = ["coherent-lasers"]
vortran = ["vortran-laser"]
oxxius = ["oxxius-laser"]
obis = ["obis-laser"]
bdv = ["h5py>=3.12.1", "tqdm>=4.66.5"]
imaris = ["pyimariswriter>=0.7.0"]
etl-opto = ["optoicc", "optokummenberg"]
egrabber = [
    "egrabber",
]

[dependency-groups]
dev = [
    "opencv-python>=4.10.0.84",
    "pytest>=8.3.3",
    "ruff>=0.8.0",
]

[tool.uv.sources]
pycobolt = { git = "https://github.com/cobolt-lasers/pycobolt.git" }
coherent-lasers = { git = "https://github.com/AllenNeuralDynamics/coherent_lasers.git" }
obis-laser = { git = "https://github.com/AllenNeuralDynamics/obis-laser.git" }
oxxius-laser = { git = "https://github.com/AllenNeuralDynamics/oxxius_laser.git" }
vortran-laser = { git = "https://github.com/AllenNeuralDynamics/vortran_laser.git" }
optokummenberg = { path = ".wheelhouse/optoKummenberg-1.0.4894-py3-none-any.whl" }
optoicc = { path = ".wheelhouse/optoICC-2.0.4922-py3-none-any.whl" }
egrabber = { path = ".wheelhouse/egrabber-24.09.0.5-py2.py3-none-any.whl" }


[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.metadata]
allow-direct-references = true

# [build-system]
# requires = ["setuptools", "setuptools-scm"]
# build-backend = "setuptools.build_meta"

# [tool.setuptools]
# package-dir = { "" = "src" }
# packages = ["voxel"]

[tool.ruff]
line-length = 120
show-fixes = true

target-version = "py311"

exclude = [
    ".bzr",
    ".direnv",
    ".eggs",
    ".git",
    ".gitignore",
    ".git-rewrite",
    ".hg",
    ".ipynb_checkpoints",
    ".mypy_cache",
    ".nox",
    ".pants.d",
    ".pyenv",
    ".pytest_cache",
    ".pytype",
    ".ruff_cache",
    ".svn",
    ".tox",
    ".venv",
    ".vscode",
    "__pypackages__",
    "_build",
    "buck-out",
    "build",
    "dist",
    "node_modules",
    "site-packages",
    "venv",
    "sdk",
]

[tool.ruff.lint]
extend-select = ["C4", "SIM", "TCH"]
fixable = ["ALL"]
